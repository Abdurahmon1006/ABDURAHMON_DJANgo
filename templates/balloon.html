<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ballon Pop — Random Colors</title>
  <style>
    :root {
      --bg1: #0f2027;
      --bg2: #203a43;
      --bg3: #2c5364;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      display: grid;
      place-items: center;
      background: radial-gradient(1200px 800px at 70% 10%, rgba(255,255,255,0.06), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2) 50%, var(--bg3));
      overflow: hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      user-select: none;
    }

    /* Subtle twinkling dots in the background */
    .stars { position: fixed; inset: 0; pointer-events: none; }
    .stars i { position: absolute; width: 2px; height: 2px; border-radius: 50%; background: rgba(255,255,255,.25); animation: twinkle 4s infinite ease-in-out; }
    @keyframes twinkle { 50% { opacity: .2; transform: scale(.6); } }

    .scene {
      position: relative;
      width: min(520px, 90vw);
      height: min(520px, 90vh);
      display: grid;
      place-items: center;
      filter: drop-shadow(0 10px 30px rgba(0,0,0,.35));
    }

    .balloon {
      --balloon-color: #ff6b6b;
      position: absolute;
      width: 160px; height: 200px;
      background: radial-gradient(120px 120px at 60% 35%, rgba(255,255,255,.6), rgba(255,255,255,0) 45%),
                  radial-gradient(80px 80px at 35% 25%, rgba(255,255,255,.35), transparent 50%),
                  var(--balloon-color);
      border-radius: 50% 50% 48% 48%/55% 55% 45% 45%;
      box-shadow: inset 0 -12px 30px rgba(0,0,0,.15), 0 18px 40px rgba(0,0,0,.35);
      transform-origin: 50% 80%;
      cursor: pointer;
      animation: float 3.8s ease-in-out infinite;
    }

    .knot {
      position: absolute; left: 50%; bottom: -10px; transform: translateX(-50%);
      width: 18px; height: 14px; background: var(--balloon-color);
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      filter: brightness(.9);
    }

    .string {
      position: absolute; left: 50%; bottom: -130px; transform: translateX(-50%);
      width: 2px; height: 130px; background: linear-gradient(transparent, rgba(255,255,255,.45));
      border-radius: 2px; opacity: .75;
      animation: wiggle 1.6s ease-in-out infinite;
      transform-origin: top;
    }

    @keyframes float {
      0%   { transform: translateY(0) rotate(-2deg) scale(1); }
      50%  { transform: translateY(-10px) rotate(2deg)  scale(1.02); }
      100% { transform: translateY(0) rotate(-2deg) scale(1); }
    }

    @keyframes wiggle {
      0%,100% { transform: translateX(-50%) rotate(-3deg); }
      50%     { transform: translateX(-50%) rotate(3deg); }
    }

    /* Rising animation when a new balloon appears */
    .rise {
      animation: rise 1.2s ease-out forwards, float 3.8s ease-in-out infinite 1.2s;
    }
    @keyframes rise {
      from { transform: translateY(60vh) scale(.9); opacity: 0; }
      to   { transform: translateY(0)     scale(1);   opacity: 1; }
    }

    /* Explosion effect */
    .burst { animation: burst 300ms ease-out forwards; filter: saturate(1.2); }
    @keyframes burst {
      to { transform: scale(1.25); opacity: 0; filter: blur(1px) saturate(1.6); }
    }

    .particles { position: absolute; inset: 0; pointer-events: none; }
    .particle {
      position: absolute; left: 50%; top: 50%; width: 10px; height: 6px;
      border-radius: 10px; background: var(--balloon-color);
      transform: translate(-50%, -50%);
      opacity: .95;
      animation: fly var(--t, 700ms) ease-out forwards;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.25));
    }
    @keyframes fly { to { transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(.8); opacity: 0; } }

    .hint {
      position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%);
      color: rgba(255,255,255,.85); font-size: 14px; letter-spacing: .3px;
      background: rgba(255,255,255,.06); padding: 10px 14px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12); backdrop-filter: blur(6px);
    }
  </style>
</head>
<body>
  <div class="stars" id="stars"></div>
  <div class="scene" id="scene"></div>
  <div class="hint">Sharga bosing: portlaydi, keyin boshqa rangda yana uchib chiqadi ✨</div>

  <script>
    const scene = document.getElementById('scene');

    // Background stars for vibe
    const stars = document.getElementById('stars');
    for (let i = 0; i < 80; i++) {
      const s = document.createElement('i');
      const x = Math.random() * 100; const y = Math.random() * 100;
      s.style.left = x + 'vw'; s.style.top = y + 'vh';
      s.style.opacity = (0.25 + Math.random() * 0.5).toFixed(2);
      s.style.animationDelay = (Math.random() * 4).toFixed(2) + 's';
      stars.appendChild(s);
    }

    function randomColor() {
      // Nice vibrant randoms
      const hues = [0, 15, 25, 45, 120, 160, 190, 210, 250, 280, 320];
      const h = hues[Math.floor(Math.random() * hues.length)];
      const s = 80 + Math.floor(Math.random() * 15); // 80–95
      const l = 55 + Math.floor(Math.random() * 10); // 55–65
      return `hsl(${h} ${s}% ${l}%)`;
    }

    function makeBalloon({ rise = false } = {}) {
      const balloon = document.createElement('div');
      balloon.className = 'balloon' + (rise ? ' rise' : '');
      const color = randomColor();
      balloon.style.setProperty('--balloon-color', color);

      const knot = document.createElement('div'); knot.className = 'knot';
      const str = document.createElement('div'); str.className = 'string';
      balloon.appendChild(knot); balloon.appendChild(str);

      balloon.addEventListener('click', () => explodeBalloon(balloon));

      return balloon;
    }

    function explodeBalloon(balloon) {
      // Prevent double clicks
      balloon.style.pointerEvents = 'none';
      balloon.classList.add('burst');

      // particles
      const count = 28;
      const box = document.createElement('div');
      box.className = 'particles';
      const rect = balloon.getBoundingClientRect();
      const color = getComputedStyle(balloon).getPropertyValue('--balloon-color');

      for (let i = 0; i < count; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.setProperty('--balloon-color', color);
        const ang = Math.random() * Math.PI * 2;
        const dist = 80 + Math.random() * 160;
        const dx = Math.cos(ang) * dist;
        const dy = Math.sin(ang) * dist;
        const rot = (Math.random() * 540 - 270).toFixed(1) + 'deg';
        const t = (400 + Math.random() * 700).toFixed(0) + 'ms';
        p.style.setProperty('--dx', dx.toFixed(1) + 'px');
        p.style.setProperty('--dy', dy.toFixed(1) + 'px');
        p.style.setProperty('--rot', rot);
        p.style.setProperty('--t', t);
        p.style.width = (6 + Math.random() * 12).toFixed(0) + 'px';
        p.style.height = (4 + Math.random() * 10).toFixed(0) + 'px';
        box.appendChild(p);
      }
      scene.appendChild(box);

      // Remove balloon after burst completes
      setTimeout(() => {
        balloon.remove();
      }, 280);

      // Spawn next balloon after a moment
      setTimeout(() => {
        spawnNewBalloon();
        // Clean particles a bit later
        setTimeout(() => box.remove(), 1200);
      }, 520);
    }

    function spawnNewBalloon() {
      const b = makeBalloon({ rise: true });
      scene.appendChild(b);
    }

    // Initial balloon centered
    scene.appendChild(makeBalloon());
  </script>
</body>
</html>
